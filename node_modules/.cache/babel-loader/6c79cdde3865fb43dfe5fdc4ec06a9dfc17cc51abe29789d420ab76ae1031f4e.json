{"ast":null,"code":"import axios from 'axios';\nimport GameDto from '../DTOs/GameDto';\nexport async function getAllGames() {\n  try {\n    const response = await axios.get(\"https://simon.pekneweby.com/api/games\");\n    if (response.data && response.data.member) {\n      const gameData = response.data.member;\n      const games = await Promise.all(gameData.map(async game => {\n        const [homeTeam, awayTeam, supervisor, referees, league] = await Promise.all([fetchData(game.homeTeamId), fetchData(game.awayTeamId), fetchData(game.superviserId), fetchReferees(game.refereeGames), fetchData(game.leagueId)]);\n        const [country, sport] = await Promise.all([fetchData(league === null || league === void 0 ? void 0 : league.countryId), fetchData(league === null || league === void 0 ? void 0 : league.sportId)]);\n        return new GameDto({\n          id: game.id,\n          lap: game.lap,\n          date: game.date_of_game,\n          parametrs: game.parametrs,\n          homeTeam,\n          awayTeam,\n          supervisor,\n          referees,\n          league,\n          country,\n          sport\n        });\n      }));\n      console.log(\"Kompletní DTO hry:\", games.map(game => game));\n      return games;\n    }\n    return [];\n  } catch (error) {\n    console.error(\"Chyba při načítání her:\", error);\n    return [];\n  }\n}\nasync function fetchData(apiUrl) {\n  if (!apiUrl) return null;\n  try {\n    const response = await axios.get(\"https://simon.pekneweby.com\" + apiUrl);\n    return response.data;\n  } catch (error) {\n    console.error(\"Chyba při načítání dat:\", error);\n    return null;\n  }\n}\nasync function fetchReferees(refereeGames) {\n  if (!refereeGames) return [];\n  return Promise.all(refereeGames.map(async refGame => {\n    try {\n      const response = await axios.get(\"https://simon.pekneweby.com\" + refGame.referee);\n      return response.data;\n    } catch (error) {\n      console.error(\"Chyba při načítání rozhodčího:\", error);\n      return null;\n    }\n  }));\n}","map":{"version":3,"names":["axios","GameDto","getAllGames","response","get","data","member","gameData","games","Promise","all","map","game","homeTeam","awayTeam","supervisor","referees","league","fetchData","homeTeamId","awayTeamId","superviserId","fetchReferees","refereeGames","leagueId","country","sport","countryId","sportId","id","lap","date","date_of_game","parametrs","console","log","error","apiUrl","refGame","referee"],"sources":["/Users/simonhrdy/Desktop/bakalarka/web/src/Repositories/GameRepository.js"],"sourcesContent":["import axios from 'axios';\nimport GameDto from '../DTOs/GameDto';\n\nexport async function getAllGames() {\n    try {\n        const response = await axios.get(\"https://simon.pekneweby.com/api/games\");\n        if (response.data && response.data.member) {\n            const gameData = response.data.member;\n\n            const games = await Promise.all(\n                gameData.map(async (game) => {\n                    const [homeTeam, awayTeam, supervisor, referees, league] = await Promise.all([\n                        fetchData(game.homeTeamId),\n                        fetchData(game.awayTeamId),\n                        fetchData(game.superviserId),\n                        fetchReferees(game.refereeGames),\n                        fetchData(game.leagueId)\n                    ]);\n\n                    const [country, sport] = await Promise.all([\n                        fetchData(league?.countryId),\n                        fetchData(league?.sportId)\n                    ]);\n\n                    return new GameDto({\n                        id: game.id,\n                        lap: game.lap,\n                        date: game.date_of_game,\n                        parametrs: game.parametrs,\n                        homeTeam,\n                        awayTeam,\n                        supervisor,\n                        referees,\n                        league,\n                        country,\n                        sport\n                    });\n                })\n            );\n            console.log(\"Kompletní DTO hry:\", games.map(game => game));\n            return games;\n        }\n        return [];\n    } catch (error) {\n        console.error(\"Chyba při načítání her:\", error);\n        return [];\n    }\n}\n\nasync function fetchData(apiUrl) {\n    if (!apiUrl) return null;\n    try {\n        const response = await axios.get(\"https://simon.pekneweby.com\" + apiUrl);\n        return response.data;\n    } catch (error) {\n        console.error(\"Chyba při načítání dat:\", error);\n        return null;\n    }\n}\n\nasync function fetchReferees(refereeGames) {\n    if (!refereeGames) return [];\n    return Promise.all(\n        refereeGames.map(async (refGame) => {\n            try {\n                const response = await axios.get(\"https://simon.pekneweby.com\" + refGame.referee);\n                return response.data;\n            } catch (error) {\n                console.error(\"Chyba při načítání rozhodčího:\", error);\n                return null;\n            }\n        })\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}