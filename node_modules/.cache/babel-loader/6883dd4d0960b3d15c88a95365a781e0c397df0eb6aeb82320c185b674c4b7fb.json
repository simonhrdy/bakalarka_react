{"ast":null,"code":"import axios from 'axios';\nimport GameDto from '../DTOs/GameDto';\nexport async function getAllGames(date) {\n  try {\n    var _ref;\n    const response = await axios.get((_ref = process.env.REACT_APP_API_URL + \"/games/\" + date) !== null && _ref !== void 0 ? _ref : new Date().toISOString().split(\"T\")[0]);\n    if (response.data && response.data.member) {\n      const gameData = response.data.member;\n      const games = await Promise.all(gameData.map(async game => {\n        const [homeTeam, awayTeam, supervisor, referees, league] = await Promise.all([fetchData(game.homeTeamId), fetchData(game.awayTeamId), fetchData(game.superviserId), fetchReferees(game.refereeGames), fetchData(game.leagueId)]);\n        const [country, sport] = await Promise.all([fetchData(league === null || league === void 0 ? void 0 : league.countryId), fetchData(league === null || league === void 0 ? void 0 : league.sportId)]);\n        return new GameDto({\n          id: game.id,\n          lap: game.lap,\n          date: game.date_of_game,\n          parametrs: game.parametrs,\n          homeTeam,\n          awayTeam,\n          supervisor,\n          referees,\n          league,\n          country,\n          sport\n        });\n      }));\n      return games;\n    }\n    return [];\n  } catch (error) {\n    console.error(\"Chyba při načítání her:\", error);\n    return [];\n  }\n}\nasync function fetchData(apiUrl) {\n  if (!apiUrl) return null;\n  try {\n    const response = await axios.get(\"https://simon.pekneweby.com\" + apiUrl);\n    return response.data;\n  } catch (error) {\n    console.error(\"Chyba při načítání dat:\", error);\n    return null;\n  }\n}\nasync function fetchReferees(refereeGames) {\n  if (!refereeGames) return [];\n  return Promise.all(refereeGames.map(async refGame => {\n    try {\n      const response = await axios.get(\"https://simon.pekneweby.com\" + refGame.referee);\n      return response.data;\n    } catch (error) {\n      console.error(\"Chyba při načítání rozhodčího:\", error);\n      return null;\n    }\n  }));\n}","map":{"version":3,"names":["axios","GameDto","getAllGames","date","_ref","response","get","process","env","REACT_APP_API_URL","Date","toISOString","split","data","member","gameData","games","Promise","all","map","game","homeTeam","awayTeam","supervisor","referees","league","fetchData","homeTeamId","awayTeamId","superviserId","fetchReferees","refereeGames","leagueId","country","sport","countryId","sportId","id","lap","date_of_game","parametrs","error","console","apiUrl","refGame","referee"],"sources":["/Users/simonhrdy/Desktop/bakalarka/web/src/Repositories/GameRepository.js"],"sourcesContent":["import axios from 'axios';\nimport GameDto from '../DTOs/GameDto';\n\nexport async function getAllGames(date) {\n    try {\n        const response = await axios.get(process.env.REACT_APP_API_URL + \"/games/\" + date ?? new Date().toISOString().split(\"T\")[0]);\n        if (response.data && response.data.member) {\n            const gameData = response.data.member;\n\n            const games = await Promise.all(\n                gameData.map(async (game) => {\n                    const [homeTeam, awayTeam, supervisor, referees, league] = await Promise.all([\n                        fetchData(game.homeTeamId),\n                        fetchData(game.awayTeamId),\n                        fetchData(game.superviserId),\n                        fetchReferees(game.refereeGames),\n                        fetchData(game.leagueId)\n                    ]);\n\n                    const [country, sport] = await Promise.all([\n                        fetchData(league?.countryId),\n                        fetchData(league?.sportId)\n                    ]);\n\n                    return new GameDto({\n                        id: game.id,\n                        lap: game.lap,\n                        date: game.date_of_game,\n                        parametrs: game.parametrs,\n                        homeTeam,\n                        awayTeam,\n                        supervisor,\n                        referees,\n                        league,\n                        country,\n                        sport\n                    });\n                })\n            );\n            return games;\n        }\n        return [];\n    } catch (error) {\n        console.error(\"Chyba při načítání her:\", error);\n        return [];\n    }\n}\n\nasync function fetchData(apiUrl) {\n    if (!apiUrl) return null;\n    try {\n        const response = await axios.get(\"https://simon.pekneweby.com\" + apiUrl);\n        return response.data;\n    } catch (error) {\n        console.error(\"Chyba při načítání dat:\", error);\n        return null;\n    }\n}\n\nasync function fetchReferees(refereeGames) {\n    if (!refereeGames) return [];\n    return Promise.all(\n        refereeGames.map(async (refGame) => {\n            try {\n                const response = await axios.get(\"https://simon.pekneweby.com\" + refGame.referee);\n                return response.data;\n            } catch (error) {\n                console.error(\"Chyba při načítání rozhodčího:\", error);\n                return null;\n            }\n        })\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}