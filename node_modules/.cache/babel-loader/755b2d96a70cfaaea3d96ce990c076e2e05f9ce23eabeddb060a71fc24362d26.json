{"ast":null,"code":"import axios from 'axios';\nimport GameDto from '../DTOs/GameDto';\nexport async function getAllGames() {\n  try {\n    const response = await axios.get(\"https://simon.pekneweby.com/api/games\");\n    console.log(response.data);\n    if (response.data && response.data.member) {\n      const gameData = response.data.member;\n      const games = await Promise.all(gameData.map(async game => {\n        const [homeTeam, awayTeam, supervisor, referees, league] = await Promise.all([fetchData(game.homeTeamId), fetchData(game.awayTeamId), fetchData(game.superviserId), fetchReferees(game.refereeGames), fetchData(game.leagueId)]);\n        return new GameDto({\n          id: game.id,\n          lap: game.lap,\n          date: game.date_of_game,\n          parametrs: game.parametrs,\n          homeTeam,\n          awayTeam,\n          supervisor,\n          referees,\n          league\n        });\n      }));\n      console.log(\"Kompletní DTO hry:\", games.map(game => game));\n      return games;\n    }\n    return [];\n  } catch (error) {\n    console.error(\"Chyba při načítání her:\", error);\n    return [];\n  }\n}\nasync function fetchData(apiUrl) {\n  if (!apiUrl) return null;\n  try {\n    const response = await axios.get(\"https://simon.pekneweby.com\" + apiUrl);\n    return response.data;\n  } catch (error) {\n    console.error(\"Chyba při načítání dat:\", error);\n    return null;\n  }\n}\nasync function fetchReferees(refereeGames) {\n  if (!refereeGames) return [];\n  return Promise.all(refereeGames.map(async refGame => {\n    try {\n      const response = await axios.get(\"https://simon.pekneweby.com\" + refGame.referee);\n      return response.data;\n    } catch (error) {\n      console.error(\"Chyba při načítání rozhodčího:\", error);\n      return null;\n    }\n  }));\n}","map":{"version":3,"names":["axios","GameDto","getAllGames","response","get","console","log","data","member","gameData","games","Promise","all","map","game","homeTeam","awayTeam","supervisor","referees","league","fetchData","homeTeamId","awayTeamId","superviserId","fetchReferees","refereeGames","leagueId","id","lap","date","date_of_game","parametrs","error","apiUrl","refGame","referee"],"sources":["/Users/simonhrdy/Desktop/bakalarka/web/src/Repositories/GameRepository.js"],"sourcesContent":["import axios from 'axios';\nimport GameDto from '../DTOs/GameDto';\n\nexport async function getAllGames() {\n    try {\n        const response = await axios.get(\"https://simon.pekneweby.com/api/games\");\n        console.log(response.data)\n        if (response.data && response.data.member) {\n            const gameData = response.data.member;\n\n            const games = await Promise.all(\n                gameData.map(async (game) => {\n                    const [homeTeam, awayTeam, supervisor, referees, league] = await Promise.all([\n                        fetchData(game.homeTeamId),\n                        fetchData(game.awayTeamId),\n                        fetchData(game.superviserId),\n                        fetchReferees(game.refereeGames),\n                        fetchData(game.leagueId)\n                    ]);\n\n                    return new GameDto({\n                        id: game.id,\n                        lap: game.lap,\n                        date: game.date_of_game,\n                        parametrs: game.parametrs,\n                        homeTeam,\n                        awayTeam,\n                        supervisor,\n                        referees,\n                        league\n                    });\n                })\n            );\n\n            console.log(\"Kompletní DTO hry:\", games.map(game => game));\n            return games;\n        }\n        return [];\n    } catch (error) {\n        console.error(\"Chyba při načítání her:\", error);\n        return [];\n    }\n}\n\nasync function fetchData(apiUrl) {\n    if (!apiUrl) return null;\n    try {\n        const response = await axios.get(\"https://simon.pekneweby.com\" + apiUrl);\n        return response.data;\n    } catch (error) {\n        console.error(\"Chyba při načítání dat:\", error);\n        return null;\n    }\n}\n\nasync function fetchReferees(refereeGames) {\n    if (!refereeGames) return [];\n    return Promise.all(\n        refereeGames.map(async (refGame) => {\n            try {\n                const response = await axios.get(\"https://simon.pekneweby.com\" + refGame.referee);\n                return response.data;\n            } catch (error) {\n                console.error(\"Chyba při načítání rozhodčího:\", error);\n                return null;\n            }\n        })\n    );\n}\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,OAAO,MAAM,iBAAiB;AAErC,OAAO,eAAeC,WAAWA,CAAA,EAAG;EAChC,IAAI;IACA,MAAMC,QAAQ,GAAG,MAAMH,KAAK,CAACI,GAAG,CAAC,uCAAuC,CAAC;IACzEC,OAAO,CAACC,GAAG,CAACH,QAAQ,CAACI,IAAI,CAAC;IAC1B,IAAIJ,QAAQ,CAACI,IAAI,IAAIJ,QAAQ,CAACI,IAAI,CAACC,MAAM,EAAE;MACvC,MAAMC,QAAQ,GAAGN,QAAQ,CAACI,IAAI,CAACC,MAAM;MAErC,MAAME,KAAK,GAAG,MAAMC,OAAO,CAACC,GAAG,CAC3BH,QAAQ,CAACI,GAAG,CAAC,MAAOC,IAAI,IAAK;QACzB,MAAM,CAACC,QAAQ,EAAEC,QAAQ,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,MAAM,CAAC,GAAG,MAAMR,OAAO,CAACC,GAAG,CAAC,CACzEQ,SAAS,CAACN,IAAI,CAACO,UAAU,CAAC,EAC1BD,SAAS,CAACN,IAAI,CAACQ,UAAU,CAAC,EAC1BF,SAAS,CAACN,IAAI,CAACS,YAAY,CAAC,EAC5BC,aAAa,CAACV,IAAI,CAACW,YAAY,CAAC,EAChCL,SAAS,CAACN,IAAI,CAACY,QAAQ,CAAC,CAC3B,CAAC;QAEF,OAAO,IAAIzB,OAAO,CAAC;UACf0B,EAAE,EAAEb,IAAI,CAACa,EAAE;UACXC,GAAG,EAAEd,IAAI,CAACc,GAAG;UACbC,IAAI,EAAEf,IAAI,CAACgB,YAAY;UACvBC,SAAS,EAAEjB,IAAI,CAACiB,SAAS;UACzBhB,QAAQ;UACRC,QAAQ;UACRC,UAAU;UACVC,QAAQ;UACRC;QACJ,CAAC,CAAC;MACN,CAAC,CACL,CAAC;MAEDd,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAEI,KAAK,CAACG,GAAG,CAACC,IAAI,IAAIA,IAAI,CAAC,CAAC;MAC1D,OAAOJ,KAAK;IAChB;IACA,OAAO,EAAE;EACb,CAAC,CAAC,OAAOsB,KAAK,EAAE;IACZ3B,OAAO,CAAC2B,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;IAC/C,OAAO,EAAE;EACb;AACJ;AAEA,eAAeZ,SAASA,CAACa,MAAM,EAAE;EAC7B,IAAI,CAACA,MAAM,EAAE,OAAO,IAAI;EACxB,IAAI;IACA,MAAM9B,QAAQ,GAAG,MAAMH,KAAK,CAACI,GAAG,CAAC,6BAA6B,GAAG6B,MAAM,CAAC;IACxE,OAAO9B,QAAQ,CAACI,IAAI;EACxB,CAAC,CAAC,OAAOyB,KAAK,EAAE;IACZ3B,OAAO,CAAC2B,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;IAC/C,OAAO,IAAI;EACf;AACJ;AAEA,eAAeR,aAAaA,CAACC,YAAY,EAAE;EACvC,IAAI,CAACA,YAAY,EAAE,OAAO,EAAE;EAC5B,OAAOd,OAAO,CAACC,GAAG,CACda,YAAY,CAACZ,GAAG,CAAC,MAAOqB,OAAO,IAAK;IAChC,IAAI;MACA,MAAM/B,QAAQ,GAAG,MAAMH,KAAK,CAACI,GAAG,CAAC,6BAA6B,GAAG8B,OAAO,CAACC,OAAO,CAAC;MACjF,OAAOhC,QAAQ,CAACI,IAAI;IACxB,CAAC,CAAC,OAAOyB,KAAK,EAAE;MACZ3B,OAAO,CAAC2B,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;MACtD,OAAO,IAAI;IACf;EACJ,CAAC,CACL,CAAC;AACL","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}