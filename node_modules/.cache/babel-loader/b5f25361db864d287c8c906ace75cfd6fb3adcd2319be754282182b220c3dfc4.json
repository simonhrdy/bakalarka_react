{"ast":null,"code":"import apiService from '../Services/ApiService';\nimport GameDto from '../DTOs/GameDto';\nexport async function getAllGames(date) {\n  try {\n    let dateOfDay = date !== null && date !== void 0 ? date : new Date().toISOString().split(\"T\")[0];\n    const url = `/dateGames/${dateOfDay}`; // `apiService` automatically uses the base URL\n    const response = await apiService.get(url); // Use ApiService for the GET request\n    if (response) {\n      return await Promise.all(response.map(async game => {\n        const [homeTeam, awayTeam, supervisor, referees, league] = await Promise.all([fetchData(game.homeTeamId), fetchData(game.awayTeamId), fetchData(game.superviserId), fetchReferees(game.refereeGames), fetchData(game.leagueId)]);\n        const [country, sport] = await Promise.all([fetchData(league === null || league === void 0 ? void 0 : league.countryId), fetchData(league === null || league === void 0 ? void 0 : league.sportId)]);\n        return new GameDto({\n          id: game.id,\n          lap: game.lap,\n          date: game.date_of_game,\n          parametrs: game.parametrs,\n          homeTeam,\n          awayTeam,\n          supervisor,\n          referees,\n          league,\n          country,\n          sport\n        });\n      }));\n    }\n    return [];\n  } catch (error) {\n    console.error(\"Chyba při načítání her:\", error);\n    return [];\n  }\n}\nasync function fetchData(apiUrl) {\n  if (!apiUrl) return null;\n  try {\n    return await apiService.get(apiUrl);\n  } catch (error) {\n    console.error(\"Chyba při načítání dat:\", error);\n    return null;\n  }\n}\nasync function fetchReferees(refereeGames) {\n  if (!refereeGames) return [];\n  return Promise.all(refereeGames.map(async refGame => {\n    try {\n      return await apiService.get(refGame.referee);\n    } catch (error) {\n      console.error(\"Chyba při načítání rozhodčího:\", error);\n      return null;\n    }\n  }));\n}","map":{"version":3,"names":["apiService","GameDto","getAllGames","date","dateOfDay","Date","toISOString","split","url","response","get","Promise","all","map","game","homeTeam","awayTeam","supervisor","referees","league","fetchData","homeTeamId","awayTeamId","superviserId","fetchReferees","refereeGames","leagueId","country","sport","countryId","sportId","id","lap","date_of_game","parametrs","error","console","apiUrl","refGame","referee"],"sources":["/Users/simonhrdy/Desktop/bakalarka/web/src/Repositories/GameRepository.js"],"sourcesContent":["import apiService from '../Services/ApiService';\nimport GameDto from '../DTOs/GameDto';\n\nexport async function getAllGames(date) {\n    try {\n        let dateOfDay = date ?? new Date().toISOString().split(\"T\")[0];\n        const url = `/dateGames/${dateOfDay}`; // `apiService` automatically uses the base URL\n        const response = await apiService.get(url); // Use ApiService for the GET request\n        if (response) {\n            return await Promise.all(\n                response.map(async (game) => {\n                    const [homeTeam, awayTeam, supervisor, referees, league] = await Promise.all([\n                        fetchData(game.homeTeamId),\n                        fetchData(game.awayTeamId),\n                        fetchData(game.superviserId),\n                        fetchReferees(game.refereeGames),\n                        fetchData(game.leagueId)\n                    ]);\n\n                    const [country, sport] = await Promise.all([\n                        fetchData(league?.countryId),\n                        fetchData(league?.sportId)\n                    ]);\n\n                    return new GameDto({\n                        id: game.id,\n                        lap: game.lap,\n                        date: game.date_of_game,\n                        parametrs: game.parametrs,\n                        homeTeam,\n                        awayTeam,\n                        supervisor,\n                        referees,\n                        league,\n                        country,\n                        sport\n                    });\n                })\n            );\n        }\n        return [];\n    } catch (error) {\n        console.error(\"Chyba při načítání her:\", error);\n        return [];\n    }\n}\n\nasync function fetchData(apiUrl) {\n    if (!apiUrl) return null;\n    try {\n        return await apiService.get(apiUrl);\n    } catch (error) {\n        console.error(\"Chyba při načítání dat:\", error);\n        return null;\n    }\n}\n\nasync function fetchReferees(refereeGames) {\n    if (!refereeGames) return [];\n    return Promise.all(\n        refereeGames.map(async (refGame) => {\n            try {\n                return await apiService.get(refGame.referee);\n            } catch (error) {\n                console.error(\"Chyba při načítání rozhodčího:\", error);\n                return null;\n            }\n        })\n    );\n}\n"],"mappings":"AAAA,OAAOA,UAAU,MAAM,wBAAwB;AAC/C,OAAOC,OAAO,MAAM,iBAAiB;AAErC,OAAO,eAAeC,WAAWA,CAACC,IAAI,EAAE;EACpC,IAAI;IACA,IAAIC,SAAS,GAAGD,IAAI,aAAJA,IAAI,cAAJA,IAAI,GAAI,IAAIE,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IAC9D,MAAMC,GAAG,GAAI,cAAaJ,SAAU,EAAC,CAAC,CAAC;IACvC,MAAMK,QAAQ,GAAG,MAAMT,UAAU,CAACU,GAAG,CAACF,GAAG,CAAC,CAAC,CAAC;IAC5C,IAAIC,QAAQ,EAAE;MACV,OAAO,MAAME,OAAO,CAACC,GAAG,CACpBH,QAAQ,CAACI,GAAG,CAAC,MAAOC,IAAI,IAAK;QACzB,MAAM,CAACC,QAAQ,EAAEC,QAAQ,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,MAAM,CAAC,GAAG,MAAMR,OAAO,CAACC,GAAG,CAAC,CACzEQ,SAAS,CAACN,IAAI,CAACO,UAAU,CAAC,EAC1BD,SAAS,CAACN,IAAI,CAACQ,UAAU,CAAC,EAC1BF,SAAS,CAACN,IAAI,CAACS,YAAY,CAAC,EAC5BC,aAAa,CAACV,IAAI,CAACW,YAAY,CAAC,EAChCL,SAAS,CAACN,IAAI,CAACY,QAAQ,CAAC,CAC3B,CAAC;QAEF,MAAM,CAACC,OAAO,EAAEC,KAAK,CAAC,GAAG,MAAMjB,OAAO,CAACC,GAAG,CAAC,CACvCQ,SAAS,CAACD,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEU,SAAS,CAAC,EAC5BT,SAAS,CAACD,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEW,OAAO,CAAC,CAC7B,CAAC;QAEF,OAAO,IAAI7B,OAAO,CAAC;UACf8B,EAAE,EAAEjB,IAAI,CAACiB,EAAE;UACXC,GAAG,EAAElB,IAAI,CAACkB,GAAG;UACb7B,IAAI,EAAEW,IAAI,CAACmB,YAAY;UACvBC,SAAS,EAAEpB,IAAI,CAACoB,SAAS;UACzBnB,QAAQ;UACRC,QAAQ;UACRC,UAAU;UACVC,QAAQ;UACRC,MAAM;UACNQ,OAAO;UACPC;QACJ,CAAC,CAAC;MACN,CAAC,CACL,CAAC;IACL;IACA,OAAO,EAAE;EACb,CAAC,CAAC,OAAOO,KAAK,EAAE;IACZC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;IAC/C,OAAO,EAAE;EACb;AACJ;AAEA,eAAef,SAASA,CAACiB,MAAM,EAAE;EAC7B,IAAI,CAACA,MAAM,EAAE,OAAO,IAAI;EACxB,IAAI;IACA,OAAO,MAAMrC,UAAU,CAACU,GAAG,CAAC2B,MAAM,CAAC;EACvC,CAAC,CAAC,OAAOF,KAAK,EAAE;IACZC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;IAC/C,OAAO,IAAI;EACf;AACJ;AAEA,eAAeX,aAAaA,CAACC,YAAY,EAAE;EACvC,IAAI,CAACA,YAAY,EAAE,OAAO,EAAE;EAC5B,OAAOd,OAAO,CAACC,GAAG,CACda,YAAY,CAACZ,GAAG,CAAC,MAAOyB,OAAO,IAAK;IAChC,IAAI;MACA,OAAO,MAAMtC,UAAU,CAACU,GAAG,CAAC4B,OAAO,CAACC,OAAO,CAAC;IAChD,CAAC,CAAC,OAAOJ,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;MACtD,OAAO,IAAI;IACf;EACJ,CAAC,CACL,CAAC;AACL","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}